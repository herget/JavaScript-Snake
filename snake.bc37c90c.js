parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"S95d":[function(require,module,exports) {
var e=e||{};window.SNAKE=e,e.addEventListener=window.addEventListener?function(e,t,n,a){e.addEventListener(t,n,a)}:window.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:void 0,e.removeEventListener=window.removeEventListener?function(e,t,n,a){e.removeEventListener(t,n,a)}:window.detachEvent?function(e,t,n){e.detachEvent("on"+t,n)}:void 0,e.Snake=e.Snake||function(){var e=[],t=function(){this.elm=null,this.elmStyle=null,this.row=-1,this.col=-1,this.xPos=-1e3,this.yPos=-1e3,this.next=null,this.prev=null};return function(n){if(n&&n.playingBoard){void 0===localStorage.jsSnakeHighScore&&localStorage.setItem("jsSnakeHighScore",0);var a=this,o=n.playingBoard,d=(0,1),l=-1,i=!0,s=!0,r=-1,c=[0,1,0,-1],u=[-1,0,1,0],m=[],k=[],g=80,h=!1,y=!1,p=document.getElementById("selectMode");p&&p.addEventListener("change",function(e){var t=(e=e||{}).target?parseInt(e.target.value):75;isNaN(t)?t=75:t<50&&(t=75),g=t,setTimeout(function(){document.getElementById("game-area").focus()},10)}),a.snakeBody={},a.snakeBody.b0=new t,a.snakeBody.b0.row=n.startRow||1,a.snakeBody.b0.col=n.startCol||1,a.snakeBody.b0.xPos=a.snakeBody.b0.row*o.getBlockWidth(),a.snakeBody.b0.yPos=a.snakeBody.b0.col*o.getBlockHeight(),a.snakeBody.b0.elm=f(),a.snakeBody.b0.elmStyle=a.snakeBody.b0.elm.style,o.getBoardContainer().appendChild(a.snakeBody.b0.elm),a.snakeBody.b0.elm.style.left=a.snakeBody.b0.xPos+"px",a.snakeBody.b0.elm.style.top=a.snakeBody.b0.yPos+"px",a.snakeBody.b0.next=a.snakeBody.b0,a.snakeBody.b0.prev=a.snakeBody.b0,a.snakeLength=1,a.snakeHead=a.snakeBody.b0,a.snakeTail=a.snakeBody.b0,a.snakeHead.elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),a.snakeHead.elm.className+=" snake-snakebody-alive",a.setPaused=function(e){y=e},a.getPaused=function(){return y},a.handleArrowKeys=function(e){if(!h&&!y){a.snakeLength;var t=-1;switch(e){case 37:case 65:t=3;break;case 38:case 87:t=0;break;case 39:case 68:t=1;break;case 40:case 83:t=2}r!==d&&(l=t),(2!==Math.abs(t-d)&&i||s)&&(r=t,i=!1,s=!1)}},a.go=function(){var e=a.snakeHead,t=a.snakeTail,n=o.grid;if(!0!==y){a.snakeTail=t.prev,a.snakeHead=t,n[t.row]&&n[t.row][t.col]&&(n[t.row][t.col]=0),-1!==r&&(d=r,-1!==l&&(r=l,l=-1)),i=!0,t.col=e.col+c[d],t.row=e.row+u[d],t.xPos=e.xPos+m[d],t.yPos=e.yPos+k[d],t.elmStyle||(t.elmStyle=t.elm.style),t.elmStyle.left=t.xPos+"px",t.elmStyle.top=t.yPos+"px",t.elm.classList.remove("snake-snakebody-block","snake-snakebody-alive"),e.elm.classList.add("snake-snakebody-block","snake-snakebody-alive");var s=document.getElementById("snakehead"),h=s.getBoundingClientRect().width,p=s.getBoundingClientRect().height,f=h/2-o.getBlockWidth()/2,v=p/2-o.getBlockHeight()/2;switch(-1!=r?r:d){case 0:s.style.transform="rotate(180deg)",s.style.left=t.xPos-f+"px",s.style.top=t.yPos-v+"px";break;case 1:s.style.transform="rotate(270deg)",s.style.left=t.xPos+"px",s.style.top=t.yPos-v+"px";break;case 2:s.style.transform="",s.style.left=t.xPos-f+"px",s.style.top=t.yPos+"px";break;case 3:s.style.transform="rotate(90deg)",s.style.left=t.xPos-f+"px",s.style.top=t.yPos-v+"px"}if(0===n[t.row][t.col])n[t.row][t.col]=1,setTimeout(function(){a.go()},g);else if(n[t.row][t.col]>0)a.handleDeath();else if(n[t.row][t.col]===o.getGridFoodValue()){if(n[t.row][t.col]=1,!a.eatFood())return void a.handleWin();setTimeout(function(){a.go()},g)}}else setTimeout(function(){a.go()},g)},a.eatFood=function(){e.length<=5&&v(10);for(var t,n=e.splice(0,5),d=n.length,l=a.snakeTail;d--;)t="b"+a.snakeLength++,a.snakeBody[t]=n[d],a.snakeBody[t].prev=l,a.snakeBody[t].elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),a.snakeBody[t].elm.className+=" snake-snakebody-alive",l.next=a.snakeBody[t],l=a.snakeBody[t];return a.snakeTail=a.snakeBody[t],a.snakeTail.next=a.snakeHead,a.snakeHead.prev=a.snakeTail,!!o.foodEaten()},a.handleDeath=function(){w(o.handleDeath)},a.handleWin=function(){w(o.handleWin)},a.rebirth=function(){h=!1,i=!0,s=!0,l=-1,a.eatFood()},a.reset=function(){if(!1!==h){for(var t,d=[],l=a.snakeHead.next;l!==a.snakeHead;)t=l.next,l.prev=null,l.next=null,d.push(l),l=t;a.snakeHead.next=a.snakeHead,a.snakeHead.prev=a.snakeHead,a.snakeTail=a.snakeHead,a.snakeLength=1;for(var i=0;i<d.length;i++)d[i].elm.style.left="-1000px",d[i].elm.style.top="-1000px",d[i].elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),d[i].elm.className+=" snake-snakebody-alive";e.concat(d),a.snakeHead.elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-dead\b/,""),a.snakeHead.elm.className+=" snake-snakebody-alive",a.snakeHead.row=n.startRow||1,a.snakeHead.col=n.startCol||1,a.snakeHead.xPos=a.snakeHead.row*o.getBlockWidth(),a.snakeHead.yPos=a.snakeHead.col*o.getBlockHeight(),a.snakeHead.elm.style.left=a.snakeHead.xPos+"px",a.snakeHead.elm.style.top=a.snakeHead.yPos+"px"}},v(10),m[0]=0,m[1]=o.getBlockWidth(),m[2]=0,m[3]=-1*o.getBlockWidth(),k[0]=-1*o.getBlockHeight(),k[1]=0,k[2]=o.getBlockHeight(),k[3]=0}function f(){var e=document.createElement("div");return e.className="snake-snakebody-block",e.style.left="-1000px",e.style.top="-1000px",e.style.width=o.getBlockWidth()+"px",e.style.height=o.getBlockHeight()+"px",e}function v(n){for(var a,d=f(),l=1;l<n;l++)(a=new t).elm=d.cloneNode(!0),a.elmStyle=a.elm.style,o.getBoardContainer().appendChild(a.elm),e[e.length]=a;(a=new t).elm=d,o.getBoardContainer().appendChild(a.elm),e[e.length]=a}function w(e){var t;t=localStorage.jsSnakeHighScore,a.snakeLength>t&&(alert("Congratulations! You have beaten your previous high score, which was "+t+"."),localStorage.setItem("jsSnakeHighScore",a.snakeLength)),a.snakeHead.elm.style.zIndex=function(e){var t,n=0,a=0;for(t in e)e[t].elm.currentStyle?a=parseFloat(e[t].elm.style["z-index"],10):window.getComputedStyle&&(a=parseFloat(document.defaultView.getComputedStyle(e[t].elm,null).getPropertyValue("z-index"),10)),!isNaN(a)&&a>n&&(n=a);return n+1}(a.snakeBody),a.snakeHead.elm.className=a.snakeHead.elm.className.replace(/\bsnake-snakebody-alive\b/,""),a.snakeHead.elm.className+=" snake-snakebody-dead",h=!0,e()}}}(),e.Food=e.Food||function(){var e=0;function t(e,t){return Math.floor(Math.random()*(t+1-e))+e}return function(n){if(n&&n.playingBoard){var a,o,d=n.playingBoard,l=e++,i=document.createElement("div");i.setAttribute("id","snake-food-"+l),i.className="snake-food-block",i.style.width=d.getBlockWidth()+"px",i.style.height=d.getBlockHeight()+"px",i.style.left="-1000px",i.style.top="-1000px",d.getBoardContainer().appendChild(i),this.getFoodElement=function(){return i},this.randomlyPlaceFood=function(){d.grid[a]&&d.grid[a][o]===d.getGridFoodValue()&&(d.grid[a][o]=0);for(var e=0,n=0,l=0,s=d.grid.length-1,r=d.grid[0].length-1;0!==d.grid[e][n];)if(e=t(1,s),n=t(1,r),++l>2e4)return!1;return d.grid[e][n]=d.getGridFoodValue(),a=e,o=n,i.style.top=e*d.getBlockHeight()+"px",i.style.left=n*d.getBlockWidth()+"px",!0}}}}(),e.Board=e.Board||function(){var t=0;function n(e){var t,n=0,a=0;for(t in e)e[t].elm.currentStyle?a=parseFloat(e[t].elm.style["z-index"],10):window.getComputedStyle&&(a=parseFloat(document.defaultView.getComputedStyle(e[t].elm,null).getPropertyValue("z-index"),10)),!isNaN(a)&&a>n&&(n=a);return n+1}return function(a){var o,d,l,i,s,r,c,u,m,k,g,h=this,y=t++,p=a||{},f=250,v=250,w=1,B=!1;function b(){(s=document.createElement("div")).setAttribute("id","playingField"),s.className="snake-playing-field",e.addEventListener(s,"click",function(){i.focus()},!1),(g=document.createElement("div")).className="modal-wrapper",g.innerHTML="<div class='modal'><div class='snake-pause-screen'><div>[Paused]</div> <p>Press [space] to unpause.</p></div></div>",(r=document.createElement("div")).className="snake-panel-component",r.innerHTML="Length: 1",(c=document.createElement("div")).className="snake-panel-component",c.innerHTML="Highscore: "+(localStorage.jsSnakeHighScore||0),u=function(){var t=document.createElement("div");t.id="sbWelcome"+y,t.className="modal-wrapper";var n=document.createElement("div");n.className="modal";p.fullScreen&&"On Windows, press F11 to play in Full Screen mode.";n.innerHTML="<div class='snake-welcome-dialog'><h1>Retro Snake</h1>Swipe or use the <strong>arrow keys</strong> on your keyboard to play the game.</div>";var a=document.createElement("button");a.appendChild(document.createTextNode("Play Game"));var o=function(){e.removeEventListener(window,"keyup",d,!1),t.style.display="none",h.setBoardState(1),h.getBoardContainer().focus()},d=function(e){if(!e)var e=window.event;var t=e.which?e.which:e.keyCode;32!==t&&13!==t||o()};return e.addEventListener(window,"keyup",d,!1),e.addEventListener(a,"click",o,!1),n.appendChild(a),t.appendChild(n),t}(),m=H("You died :(","sbTryAgain","snake-try-again-dialog"),k=H("You win! :D","sbWin","snake-win-dialog"),e.addEventListener(i,"keyup",function(e){if(!e)e=window.event;return e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},!1),i.className="snake-game-container",elmFooter=document.querySelector(".snake-footer"),elmFooter.appendChild(r),i.appendChild(g),i.appendChild(s),i.appendChild(u),i.appendChild(m),i.appendChild(k),d=new e.Snake({playingBoard:h,startRow:20,startCol:20}),o=new e.Food({playingBoard:h}),u.style.display="block";var t=new Hammer.Manager(i),n=new Hammer.Swipe,a=function(e){1===w?(d.rebirth(),d.handleArrowKeys(e),h.setBoardState(2),d.go()):d.handleArrowKeys(e)};t.add(n),t.on("swipeleft",function(){a(37)}),t.on("swiperight",function(){a(39)}),t.on("swipeup",function(){a(38)}),t.on("swipedown",function(){a(40)})}function H(t,n,a){var o=document.createElement("div");o.id=n+y,o.className="modal-wrapper";var d=document.createElement("div");d.className="modal",d.innerHTML="<div class='"+a+"'>Retro Snake <p>"+t+"</p></div>";var l=document.createElement("button");l.appendChild(document.createTextNode("Play Again?"));var i=function(){o.style.display="none",h.resetBoard(),h.setBoardState(1),h.getBoardContainer().focus()};return e.addEventListener(window,"keyup",function(e){if(0===w&&"block"===o.style.display){e||(e=window.event);var t=e.which?e.which:e.keyCode;32!==t&&13!==t||i()}},!0),e.addEventListener(l,"click",i,!1),d.appendChild(l),o.appendChild(d),o}function S(e){Math.max(n(d.snakeBody),n({tmp:{elm:o.getFoodElement()}}));i.removeChild(e),i.appendChild(e),e.style.display="block",h.setBoardState(0)}h.grid=[],h.setPaused=function(e){B=e,d.setPaused(e),g.style.display=B?"block":"none"},h.getPaused=function(){return B},h.resetBoard=function(){e.removeEventListener(i,"keydown",l,!1),d.reset(),r.innerHTML="Length: 1",h.setupPlayingField()},h.getBoardState=function(){return w},h.setBoardState=function(e){w=e},h.getGridFoodValue=function(){return-1},h.getPlayingFieldElement=function(){return s},h.setBoardContainer=function(e){"string"==typeof e&&(e=document.getElementById(e)),e!==i&&(i=e,s=null,h.setupPlayingField())},h.getBoardContainer=function(){return i},h.getBlockWidth=function(){return 10},h.getBlockHeight=function(){return 10},h.setupPlayingField=function(){var t,n,a,r;s||b(),!0===p.fullScreen?(0,0,r=0,"number"==typeof window.innerWidth?r=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?r=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(r=document.body.clientWidth),t=r,a=0,"number"==typeof window.innerHeight?a=window.innerHeight:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?a=document.documentElement.clientHeight:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(a=document.body.clientHeight),n=a):(p.top,p.left,t=p.width,n=p.height);var c=h.getBlockWidth()+t%h.getBlockWidth(),u=Math.min(f*h.getBlockWidth()-c,t-c),m=h.getBlockHeight()+n%h.getBlockHeight(),k=Math.min(v*h.getBlockHeight()-m,n-m);s.style.left=h.getBlockWidth()+"px",s.style.top=h.getBlockHeight()+"px",s.style.width=u+"px",s.style.height=k+"px";var g=m-h.getBlockHeight();h.getBlockHeight(),Math.round((g-30)/2);h.grid=[];for(var y=u/h.getBlockWidth()+2,w=k/h.getBlockHeight()+2,B=0;B<w;B++){h.grid[B]=[];for(var H=0;H<y;H++)h.grid[B][H]=0===H||0===B||H===y-1||B===w-1?1:0}o.randomlyPlaceFood(),l=function(t){if(!t)t=window.event;var n=t.which?t.which:t.keyCode;if(1===h.getBoardState()){if(!(n>=37&&n<=40)&&87!==n&&65!==n&&83!==n&&68!==n)return;e.removeEventListener(i,"keydown",l,!1),l=function(e){if(!e)e=window.event;var t=e.which?e.which:e.keyCode;return 32===t&&0!=h.getBoardState()&&h.setPaused(!h.getPaused()),d.handleArrowKeys(t),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1},e.addEventListener(i,"keydown",l,!1),d.rebirth(),d.handleArrowKeys(n),h.setBoardState(2),d.go()}return t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),!1},e.addEventListener(i,"keydown",l,!1)},h.foodEaten=function(){return r.innerHTML="Length: "+d.snakeLength,d.snakeLength>localStorage.jsSnakeHighScore&&(localStorage.setItem("jsSnakeHighScore",d.snakeLength),c.innerHTML="Highscore: "+localStorage.jsSnakeHighScore),!!o.randomlyPlaceFood()},h.handleDeath=function(){S(m)},h.handleWin=function(){S(k)},p.fullScreen=void 0!==p.fullScreen&&p.fullScreen,p.top=void 0===p.top?0:p.top,p.left=void 0===p.left?0:p.left,p.width=void 0===p.width?400:p.width,p.height=void 0===p.height?400:p.height,p.fullScreen&&e.addEventListener(window,"resize",function(){h.setupPlayingField()},!1),h.setBoardState(0),p.boardContainer&&h.setBoardContainer(p.boardContainer)}}();
},{}]},{},["S95d"], null)
//# sourceMappingURL=/snake.bc37c90c.js.map